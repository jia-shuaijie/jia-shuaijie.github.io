# 工厂模式

现在有一个业务是早上需要开一个会议,而这个会议需要会前与会有都需要审批.

会前需要施工单位,监理,业主进行审批,会议后需要施工单位和监理进行审批.

所以我们可以创建一个工厂,根据角色ID来获取当前角色需要那个处理器来进行处理.

> ps: 因为业务为实际需求所以这里仅展示伪代码.不会贴真实代码

## 实现代码

先写一个接口,这个接口里面只需要一个方法就是执行审批

```java

public interface ApprovalHandler {

    /**
     * 审批当前信息数据
     *
     * @param meeting 会议信息
     */
    void execute(Meeting meeting, MeetingQo qo);

}
```

根据三个角色创建三个实现类

施工单位审批执行处理

```java
public class ConstructionUnitApprovalHandler implements ApprovalHandler {
    @Override
    public void execute(Meeting meeting, MeetingQo qo) {
        // 处理自身需要审批的执行
    }
}
```

业主处理执行实现类

```java
public class PropertyOwnerApprovalHandler implements ApprovalHandler {
    @Override
    public void execute(Meeting meeting, MeetingQo qo) {
        // 处理自身需要审批的执行
    }
}
```

监理处理执行实现类

```java
public class SupervisionApprovalHandler implements ApprovalHandler {
    @Override
    public void execute(Meeting meeting, MeetingQo qo) {
        // 处理自身需要审批的执行
    }
}
```

创建工厂类

```java
public class MorningShiftMeetingApprovalFactory {

    public ApprovalHandler getApprovalHandler(Integer roleId) {
        if (roleId == null) return null;

        // 获取施工单位审批处理器
        if (UserTypeEnum.contractor_manager.code.equals(roleId)) {
            return new ConstructionUnitApprovalHandler();
        }
        // 获取监理审批处理器
        if (UserTypeEnum.supervision.code.equals(roleId)) {
            return new SupervisionApprovalHandler();
        }
        // 获取业主审批处理器
        if (UserTypeEnum.owner.code.equals(roleId)) {
            return new PropertyOwnerApprovalHandler();
        }

        return null;
    }

}
```
