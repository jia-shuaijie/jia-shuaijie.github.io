import{u as $,g as ae,h as te,i as _,j as le,P as se,k as Ee,l as re,m as S,n as F,p as ie,q as J,s as t,v as ve,R as T,x as oe,y as ne,z as ue,C as Be,A as de,B as ce,D as Ae,E as he,F as pe,G as f,H as me,I as ge,J as ye,K as U,L as I,M as je}from"./app-QGmvmOnY.js";const Ce=["/","/collect/dev.html","/collect/linux%E8%B5%84%E6%BA%90%E4%B8%8B%E8%BD%BD%E7%AB%99.html","/collect/software.html","/collect/%E5%9B%BE%E5%BA%8A.html","/collect/%E6%9D%82%E9%A1%B9.html","/collect/%E7%97%85%E6%AF%92%E6%A3%80%E6%B5%8B.html","/collect/%E8%B5%84%E6%BA%90%E5%88%86%E4%BA%AB.html","/dev/android/android%20studio.html","/dev/android/android-ui.html","/dev/java/ElasticSearch%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2.html","/dev/java/RabbitMQ.html","/dev/java/fastdfs.html","/dev/java/maven.html","/dev/java/%E9%94%99%E8%AF%AF%E6%94%B6%E9%9B%86.html","/dev/sql/mysql.html","/dev/sql/postgresql.html","/dev/web/layerUI.html","/dev/web/vue%E6%A1%86%E6%9E%B6.html","/install/linux/Rabbitmq.html","/install/linux/emqx.html","/install/linux/mysql8.html","/install/linux/nginx.html","/install/win/mysql8.html","/install/win/nvm.html","/dev/java/base/JavaServlet.html","/dev/java/base/Java%E6%B3%A8%E8%A7%A3.html","/dev/java/base/javaServerSocket%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B.html","/dev/java/base/java%E5%8F%8D%E5%B0%84.html","/dev/java/base/jdbc.html","/dev/java/base/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E9%9B%86%E5%90%88.html","/dev/java/redis/redis-rank.html","/dev/java/redis/redis.html","/dev/java/redis/redisUtils.html","/dev/java/springCloud/Eureka.html","/dev/java/springCloud/OpenFeign.html","/dev/java/springCloud/Resilience4j.html","/dev/java/springCloud/RestTemplate.html","/dev/java/springCloud/Spring%20Cloud%20Sleuth.html","/dev/java/springCloud/springCloudConfig.html","/dev/java/springCloud/springCloudGateway.html","/dev/java/springCloud/%E5%BE%AE%E6%9C%8D%E5%8A%A1.html","/dev/java/springCloud/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%B9%E9%94%99.html","/dev/java/springboot/mybatis%E5%AD%97%E6%AE%B5%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%85%A5.html","/dev/java/springboot/springboot-swagger.html","/dev/java/springboot/springboot-%E5%A4%84%E7%90%86%E7%B1%BB-%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%B1%BB.html","/dev/java/springboot/springboot-%E6%8B%A6%E6%88%AA%E5%99%A8%E6%B3%A8%E5%85%A5%E6%95%B0%E6%8D%AE.html","/dev/java/springboot/springboot-%E7%BB%9F%E4%B8%80%E6%95%B0%E6%8D%AE%E8%BF%94%E5%9B%9E%E7%B1%BB.html","/dev/java/springboot/springboot-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%84%B1%E6%95%8F%E6%B3%A8%E8%A7%A3.html","/dev/java/springboot/springboot%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html","/dev/java/springboot/springboot%E6%95%B4%E5%90%88rabbitMQ.html","/dev/java/springboot/springboot%E6%95%B4%E5%90%88redis.html","/dev/java/spring%E7%B3%BB%E5%88%97/mybatis.html","/dev/java/spring%E7%B3%BB%E5%88%97/spring.html","/dev/java/spring%E7%B3%BB%E5%88%97/springSSM%E6%95%B4%E5%90%88.html","/dev/java/spring%E7%B3%BB%E5%88%97/springmvc.html","/dev/java/spring%E7%B3%BB%E5%88%97/spring%E6%95%B4%E5%90%88rabbitmq.html","/dev/java/%E5%B7%A5%E5%85%B7%E7%B1%BB/EasyExcelUtil.html","/dev/java/%E5%B7%A5%E5%85%B7%E7%B1%BB/fastjson2.html","/dev/java/%E5%B7%A5%E5%85%B7%E7%B1%BB/http-client.html","/dev/java/%E5%B7%A5%E5%85%B7%E7%B1%BB/poi-tl.html","/dev/java/%E5%B7%A5%E5%85%B7%E7%B1%BB/rsa-encryption.html","/dev/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%92%8C%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99.html","/dev/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F.html","/dev/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.html","/dev/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.html","/dev/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.html","/404.html","/collect/","/dev/android/","/dev/","/dev/java/","/dev/sql/","/dev/web/","/install/linux/","/install/","/install/win/","/dev/java/base/","/dev/java/redis/","/dev/java/springCloud/","/dev/java/springboot/","/dev/java/spring%E7%B3%BB%E5%88%97/","/dev/java/%E5%B7%A5%E5%85%B7%E7%B1%BB/","/dev/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/dev/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B/","/dev/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/","/category/","/category/android/","/category/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/","/category/%E6%95%B0%E6%8D%AE%E5%BA%93/","/category/web/","/category/linux/","/category/win/","/category/java/","/category/redis/","/category/spring%E7%B3%BB%E5%88%97/","/category/%E5%B7%A5%E5%85%B7%E7%B1%BB/","/category/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/tag/","/tag/java/","/tag/sql/","/tag/web/","/tag/redis/","/tag/%E5%B7%A5%E5%85%B7%E7%B1%BB/","/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/article/","/star/","/timeline/"],be="SEARCH_PRO_QUERY_HISTORY",p=$(be,[]),Fe=()=>{const{queryHistoryCount:l}=f,s=l>0;return{enabled:s,queryHistory:p,addQueryHistory:E=>{s&&(p.value=Array.from(new Set([E,...p.value.slice(0,l-1)])))},removeQueryHistory:E=>{p.value=[...p.value.slice(0,E),...p.value.slice(E+1)]}}},Q=l=>Ce[l.id]+("anchor"in l?`#${l.anchor}`:""),fe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:M}=f,m=$(fe,[]),we=()=>{const l=M>0;return{enabled:l,resultHistory:m,addResultHistory:s=>{if(l){const E={link:Q(s),display:s.display};"header"in s&&(E.header=s.header),m.value=[E,...m.value.slice(0,M-1)]}},removeResultHistory:s=>{m.value=[...m.value.slice(0,s),...m.value.slice(s+1)]}}},qe=l=>{const s=Be(),E=_(),w=de(),i=S(0),j=F(()=>i.value>0),c=ce([]);return Ae(()=>{const{search:A,terminate:q}=he(),g=pe(n=>{const y=n.join(" "),{searchFilter:R=d=>d,splitWord:x,suggestionsFilter:L,...h}=s.value;y?(i.value+=1,A(n.join(" "),E.value,h).then(d=>R(d,y,E.value,w.value)).then(d=>{i.value-=1,c.value=d}).catch(d=>{console.warn(d),i.value-=1,i.value||(c.value=[])})):c.value=[]},f.searchDelay-f.suggestDelay);J([l,E],([n])=>g(n),{immediate:!0}),me(()=>{q()})}),{isSearching:j,results:c}};var xe=ae({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:s}){const E=te(),w=_(),i=le(se),{enabled:j,addQueryHistory:c,queryHistory:A,removeQueryHistory:q}=Fe(),{enabled:g,resultHistory:n,addResultHistory:y,removeResultHistory:R}=we(),x=j||g,L=Ee(l,"queries"),{results:h,isSearching:d}=qe(L),r=re({isQuery:!0,index:0}),u=S(0),B=S(0),O=F(()=>x&&(A.value.length>0||n.value.length>0)),H=F(()=>h.value.length>0),D=F(()=>h.value[u.value]||null),Y=()=>{const{isQuery:e,index:a}=r;a===0?(r.isQuery=!e,r.index=e?n.value.length-1:A.value.length-1):r.index=a-1},G=()=>{const{isQuery:e,index:a}=r;a===(e?A.value.length-1:n.value.length-1)?(r.isQuery=!e,r.index=0):r.index=a+1},z=()=>{u.value=u.value>0?u.value-1:h.value.length-1,B.value=D.value.contents.length-1},K=()=>{u.value=u.value<h.value.length-1?u.value+1:0,B.value=0},V=()=>{B.value<D.value.contents.length-1?B.value+=1:K()},N=()=>{B.value>0?B.value-=1:z()},k=e=>e.map(a=>je(a)?a:t(a[0],a[1])),W=e=>{if(e.type==="customField"){const a=ge[e.index]||"$content",[v,b=""]=ye(a)?a[w.value].split("$content"):a.split("$content");return e.display.map(o=>t("div",k([v,...o,b])))}return e.display.map(a=>t("div",k(a)))},C=()=>{u.value=0,B.value=0,s("updateQuery",""),s("close")},X=()=>j?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},i.value.queryHistory),A.value.map((e,a)=>t("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===a}],onClick:()=>{s("updateQuery",e)}},[t(U,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:v=>{v.preventDefault(),v.stopPropagation(),q(a)}})]))])):null,Z=()=>g?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},i.value.resultHistory),n.value.map((e,a)=>t(T,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===a}],onClick:()=>{C()}},()=>[t(U,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(v=>k(v)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:v=>{v.preventDefault(),v.stopPropagation(),R(a)}})]))])):null;return ie("keydown",e=>{if(l.isFocusing){if(H.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const a=D.value.contents[B.value];c(l.queries.join(" ")),y(a),E.push(Q(a)),C()}}else if(g){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:a}=r;r.isQuery?(s("updateQuery",A.value[a]),e.preventDefault()):(E.push(n.value[a].link),C())}}}}),J([u,B],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!H.value:!O.value}],id:"search-pro-results"},l.queries.length?d.value?t(ve,{hint:i.value.searching}):H.value?t("ul",{class:"search-pro-result-list"},h.value.map(({title:e,contents:a},v)=>{const b=u.value===v;return t("li",{class:["search-pro-result-list-item",{active:b}]},[t("div",{class:"search-pro-result-title"},e||i.value.defaultTitle),a.map((o,ee)=>{const P=b&&B.value===ee;return t(T,{to:Q(o),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{c(l.queries.join(" ")),y(o),C()}},()=>[o.type==="text"?null:t(o.type==="title"?oe:o.type==="heading"?ne:ue,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[o.type==="text"&&o.header?t("div",{class:"content-header"},o.header):null,t("div",W(o))])])})])})):i.value.emptyResult:x?O.value?[X(),Z()]:i.value.emptyHistory:i.value.emptyResult)}});export{xe as default};
