---
icon: pen-to-square
date: 2024-07-22
category:
  - 后端开发
  - spring系列
tag:
  - java
---
# 微服务

简介

```
业务系统实施服务化改造之后,原本共享的业务被拆分形成可复⽤的服务,可以在最⼤程度上避免共享业务的重复建设、资源连接瓶颈瓶颈等问题.

微服务就是这样⼀种解决⽅案,从名字上来看,⾯向服务(SOA)和微服务本质上都是服务化思想的⼀种体现。如果SOA是⾯向服务开发的思想的雏形,那么微服务就是针对可重⽤业务服务的更进⼀步优化,我们可以把SOA看成微服务的超集,⼀但服务规模扩⼤就意味着服务的构建、发布、运维的复杂度也会成倍增加,所以实施微服务的前提是软件交付链路及基础设施的成熟化。

因此微服务在我看来并不是⼀个新的概念,他本质上是服务化思想的最佳实践⽅向。

由于SOA和微服务两者的关注点不⼀样,造成了这两者有⾮常⼤的区别:

    SOA关注的是服务的重⽤性及解决信息孤岛问题。
    微服务关注的是解耦,虽然解耦和可重⽤性从特定的⻆度来看是⼀样的,但本质上是有区别的,解耦是降低业务之间的耦合度,⽽重⽤性关注的是服务的复⽤。
    微服务会更多地关注在DevOps的持续交付上,因为服务粒度细化之后使得开发运维变得更加重要,因此微服务与容器化技术的结合更加紧密。
````

![微服务](https://i.jpg.dog/0f284481d6391e005b3604c099c07ec8.png)

如图1-4所示,将每个具体的业务服务构成可独⽴运⾏的微服务,每个微服务只关注某个特定的功能,服务之间采⽤轻量级通信机制REST API进⾏通信。

细⼼的读者会发现SOA中的服务和微服务架构中的服务粒度是⼀样的,不是说SOA是微服务的超集吗？

其实我们可以把⽤户服务拆分的更细,⽐如⽤户注册服务、⽤户鉴权服务等。实际上,微服务到底要拆分到多⼤的粒度没有统⼀的标准,更多的时候是需要在粒度和团队之间找平衡的,微服务的粒度越⼩,服务独⽴性带来的好处就越多,但是管理⼤量的微服务也会越复杂。

微服务框架功能

```
注册中⼼
    服务提供者和消费者,能够从注册中⼼注册和得到服务信息。

配置中⼼
    在微服务架构中设计服务较多需要对于配置⽂件统⼀管理。

服务链路追踪
    对于服务之间的负载调⽤,要能通过链路追踪,得到具体参与者,调⽤链路出现问题能够快速定位。

负载均衡
    服务调⽤服务会采⽤⼀定的负载均衡策略,来保证服务的⾼可⽤。

服务容错
    通过熔断、降级服务容错策略,对系统进⾏有效的保护.
    降级是在服务或依赖的服务异常时,返回保底数据.
    熔断是指依赖服务多次失效,则熔断器打开,不再尝试调⽤,直接返回降级信息。
    熔断后,定期探测依赖服务可⽤性,若恢复则恢复调⽤。

服务⽹关
    ⽤户请求过载时进⾏限流、排队、过载保护、⿊⽩名单、异常⽤户过滤拦截等都可以通过服务⽹关实现。

服务发布与回滚
    蓝绿部署、灰度、AB Test等发布策略,可快速回滚应⽤。

服务动态伸缩、容器化
    根据服务负载情况,可快速⼿动或⾃动进⾏节点增加和减少。
```

# spring Cloud

简介

```
Spring Cloud是Spring提供的微服务框架。

它利⽤Spring Boot的开发特性简化了微服务开发的复杂性,如服务发现注册、配置中⼼、消息总线、负载均衡、断路器、数据监控等,这些⼯作都可以借助Spring Boot的开发⻛格做到⼀键启动和部署。

Spring Cloud的⽬标是通过⼀系列组件,帮助开发者迅速构件⼀个分布式系统,Spring Cloud 是通过包装其它公司产品来实现的,⽐如Spring Cloud整合了开源的Netflix很多产品。

Spring Cloud提供了微服务治理的诸多组件,例如服务注册和发现、配置中⼼、熔断器、智能路由、微代理、控制总线、全局锁、分布式会话等。
```

spring cloud 版本
|    Spring Cloud     |              Spring Boot              |
| :-----------------: | :-----------------------------------: |
| 2020.0.x aka Ilford | 2.4.x, 2.5.x (Starting with 2020.0.3) |
|       Hoxton        |   2.2.x, 2.3.x (Starting with SR5)    |
|      Greenwich      |                 2.1.x                 |
|      Finchley       |                 2.0.x                 |
|       Edgware       |                 1.5.x                 |
|       Dalston       |                 1.5.x                 |

官⽹对版本进⾏如下解释

```
Spring Cloud Dalston, Edgware, Finchley, and Greenwich have all reached end of lifestatus and are no longer supported. Spring Cloud Dalston、Edgware、Finchley 和 Greenwich 都已达到⽣命周期终⽌状态,不再受⽀持
```
